// Load poems from the CSV file, splitting by quotes instead of line breaks
async function loadPoems() {
    try {
        const response = await fetch('poems.csv'); // Update the file path as needed
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.text();

        // Split the text using double quotes, which enclose each poem
        poems = data.split(/(?:"[^"]*"|[^,])+/)
            .map(entry => entry.replace(/"/g, '').trim()) // Remove quotes and trim whitespace
            .filter(entry => entry); // Remove empty entries
        
        if (poems.length === 0) {
            throw new Error('CSV file is empty or improperly formatted.');
        }
        showRandomPoem(); // Show a poem immediately upon loading
    } catch (error) {
        console.error('Fehler beim Laden der Gedichte:', error);
        document.getElementById('poemDisplay').textContent = 'Gedichte konnten nicht geladen werden. Fehler: ' + error.message;
    }
}

// Display a random poem with proper HTML formatting
function showRandomPoem() {
    const randomIndex = Math.floor(Math.random() * poems.length);
    currentPoem = poems[randomIndex];
    document.getElementById('poemDisplay').innerHTML = currentPoem; // Using innerHTML to render HTML formatting in the poems
}

// Load poems when the page loads
loadPoems();
